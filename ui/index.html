<!DOCTYPE html>
<html lang="en" data-theme="neptune" data-layout="monet">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Assistant Digest</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,300;0,400;1,300&family=Inter:wght@300;400;500;600&family=Playfair+Display:wght@400;500;600;700&family=Source+Sans+Pro:wght@400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Stars background for space themes -->
    <div class="stars"></div>

    <!-- Top Bar: Digest Toggle -->
    <nav class="top-bar">
        <div class="digest-type-slider">
            <div class="layout-slider">
                <button class="layout-btn active" data-digest-type="daily">Daily</button>
                <button class="layout-btn" data-digest-type="weekly">Weekly</button>
            </div>
        </div>
        <div class="nav-links">
            <a href="notes.html" class="nav-link">üìù My Notes</a>
        </div>
    </nav>

    <div class="container">

        <header class="header">
            <div class="logo">
                <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                </svg>
                <h1>Home Assistant Digest</h1>
            </div>
            <p class="tagline">AI-powered daily health reports for your smart home</p>
            <p class="date-display" id="current-date"></p>
        </header>

        <main class="main">
            <!-- Status Card -->
            <section class="card status-card">
                <h2>System Status</h2>
                <div class="status-grid" id="status-grid">
                    <div class="status-item">
                        <span class="label">API Key</span>
                        <span class="value" id="api-status">Checking...</span>
                    </div>
                    <div class="status-item">
                        <span class="label">Profile</span>
                        <span class="value" id="profile-status">--</span>
                    </div>
                    <div class="status-item">
                        <span class="label">Entities</span>
                        <span class="value" id="entities-count">--</span>
                    </div>
                    <div class="status-item">
                        <span class="label">Snapshots</span>
                        <span class="value" id="snapshot-count">--</span>
                    </div>
                    <div class="status-item">
                        <span class="label">Scheduler</span>
                        <span class="value" id="scheduler-status">--</span>
                    </div>
                    <div class="status-item">
                        <span class="label">Next Digest</span>
                        <span class="value" id="next-digest">--</span>
                    </div>
                </div>
                <div class="status-actions">
                    <button class="btn btn-sm btn-secondary" id="generate-digest">
                        Generate Now
                    </button>

                    <div id="action-status" class="action-status"></div>
                </div>
            </section>

            <!-- Setup Card (shown when not fully configured) -->
            <section class="card setup-card" id="setup-card">
                <h2>Getting Started</h2>
                <div class="steps">
                    <div class="step" id="step-1">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <h3>Configure API Key</h3>
                            <p>Add your Google Gemini API key in the add-on configuration.</p>
                        </div>
                    </div>
                    <div class="step" id="step-2">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <h3>Set Up Home Profile</h3>
                            <p>Answer a few quick questions about your home. We'll automatically monitor everything for
                                you!</p>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary" id="start-setup" disabled>
                    Start Setup
                </button>
            </section>



            <!-- Latest Digest Card (shown when configured) -->
            <section class="card digest-card hidden" id="digest-card">
                <div class="digest-header">
                    <h2>Latest Digest</h2>
                    <span class="digest-time" id="digest-timestamp"></span>
                </div>
                <div class="digest-content" id="digest-content">
                    <p class="empty-state">No digest generated yet. Click "Generate Digest Now" or wait for your
                        scheduled time.</p>
                </div>
                <!-- Container for the new grid layout -->
                <div class="digest-grid" id="digest-grid"></div>
            </section>

            <!-- Past Digests (shown when there are multiple) -->
            <section class="card history-card hidden" id="history-card">
                <h2>Past Digests</h2>
                <div class="digest-list" id="digest-list"></div>
            </section>
        </main>

        <footer class="footer">
            <p>Home Assistant Digest v0.1.0</p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>

</html>